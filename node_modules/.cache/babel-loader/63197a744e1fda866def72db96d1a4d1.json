{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Abby\\\\Desktop\\\\portfolio\\\\portfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Abby\\\\Desktop\\\\portfolio\\\\portfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Abby\\\\Desktop\\\\portfolio\\\\portfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Abby\\\\Desktop\\\\portfolio\\\\portfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Abby\\\\Desktop\\\\portfolio\\\\portfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Abby\\\\Desktop\\\\portfolio\\\\portfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Abby\\\\Desktop\\\\portfolio\\\\portfolio\\\\client\\\\src\\\\Components\\\\Trip-Planner\\\\components\\\\Application\\\\Plan.js\";\nimport React, { Component } from 'react';\nimport { CardBody, CardTitle } from 'reactstrap';\nimport { Col, Container, Row } from 'reactstrap';\nimport { ButtonGroup, Button } from 'reactstrap';\nimport { request } from '../../api/api';\nimport Itinerary from './Itinerary';\nimport Map from './Map';\nimport Search from './Search';\nimport { Collapse } from 'reactstrap';\nimport { Form } from 'reactstrap';\nimport { IconContext } from 'react-icons';\nimport { MdAdd } from 'react-icons/md';\nimport { Input, InputGroup } from 'reactstrap';\n\nvar Plan =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Plan, _Component);\n\n  function Plan(props) {\n    var _this;\n\n    _classCallCheck(this, Plan);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Plan).call(this, props));\n    _this.getFile = _this.getFile.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.planRequest = _this.planRequest.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      isLoad: false,\n      ID: \"\",\n      name: \"\",\n      lat: 0,\n      long: 0\n    };\n    _this.handleChangeID = _this.handleChangeID.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChangeLong = _this.handleChangeLong.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChangeName = _this.handleChangeName.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChangeLat = _this.handleChangeLat.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Plan, [{\n    key: \"handleChangeID\",\n    value: function handleChangeID(event) {\n      this.setState({\n        ID: event.target.value\n      });\n    }\n  }, {\n    key: \"handleChangeName\",\n    value: function handleChangeName(event) {\n      this.setState({\n        name: event.target.value\n      });\n    }\n  }, {\n    key: \"handleChangeLat\",\n    value: function handleChangeLat(event) {\n      this.setState({\n        lat: event.target.value\n      });\n    }\n  }, {\n    key: \"handleChangeLong\",\n    value: function handleChangeLong(event) {\n      this.setState({\n        long: event.target.value\n      });\n    }\n  }, {\n    key: \"getFile\",\n    value: function getFile(event) {\n      var reader = new FileReader();\n\n      reader.onload = function (event) {\n        var fileContent = event.target.result;\n        var contents = JSON.parse(fileContent);\n        this.props.updateBasedOnResponse(contents);\n      }.bind(this);\n\n      reader.readAsText(event.target.files[0]);\n    }\n  }, {\n    key: \"planRequest\",\n    value: function planRequest() {\n      var _this2 = this;\n\n      if (this.props.trip.places.length !== 0) {\n        request(this.props.trip, 'plan', this.props.port, this.props.host).then(function (response) {\n          return _this2.props.updateBasedOnResponse(response);\n        });\n        this.setState({\n          showComponent: true\n        });\n      }\n    }\n  }, {\n    key: \"addPlace\",\n    value: function addPlace() {\n      if (this.state.ID.length === 0 && this.state.name.length === 0 && this.state.lat === 0 && this.state.long === 0) return;\n      var place = {\n        'id': this.state.ID,\n        'name': this.state.name,\n        'latitude': this.state.lat,\n        'longitude': this.state.long\n      };\n      this.props.updatePlaces(place, \"add\");\n      if (this.props.realTime) this.planRequest();\n    }\n  }, {\n    key: \"clearFileUploader\",\n    value: function clearFileUploader() {\n      var defaultState = {\n        type: \"trip\",\n        version: 4,\n        title: \"My Trip\",\n        options: {\n          units: \"miles\",\n          unitName: \"\",\n          unitRadius: 0,\n          optimization: \"none\",\n          map: \"kml\"\n        },\n        places: [],\n        distances: [],\n        map: null\n      };\n      this.props.updateBasedOnResponse(defaultState);\n    }\n  }, {\n    key: \"saveToFile\",\n    value: function saveToFile(fileType) {\n      var source = fileType === 'json' ? JSON.stringify(this.props.trip) : this.props.trip.map;\n      var filename = this.props.trip.title.replace(' ', '_') + '.' + fileType;\n      var contentType = \"application/\" + fileType + \";charset=utf-8;\";\n\n      if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n        var blob = new Blob([decodeURIComponent(encodeURI(source))], {\n          type: contentType\n        });\n        navigator.msSaveOrOpenBlob(blob, filename);\n      } else {\n        var a = document.createElement('a');\n        a.download = filename;\n        a.href = 'data:' + contentType + ',' + encodeURIComponent(source);\n        a.target = '_blank';\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n      }\n    }\n  }, {\n    key: \"toggleLoad\",\n    value: function toggleLoad() {\n      this.setState({\n        isLoad: !this.state.isLoad\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var fileuploader = React.createElement(Collapse, {\n        isOpen: this.state.isLoad,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Upload your trip file:\"), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"file\",\n        name: \"myFile\",\n        id: \"example\",\n        onChange: function onChange(event) {\n          _this3.getFile(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      })));\n      var functions = React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(ButtonGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(Button, {\n        key: 'load',\n        color: \"primary\",\n        style: {\n          marginBottom: '1rem'\n        },\n        className: \"btn-outline-dark unit-button\",\n        onClick: function onClick() {\n          return _this3.toggleLoad();\n        },\n        active: this.state.isLoad,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Load\"), React.createElement(Button, {\n        key: 'clear',\n        color: \"primary\",\n        style: {\n          marginBottom: '1rem'\n        },\n        className: \"btn-outline-dark unit-button\",\n        onClick: function onClick() {\n          return _this3.clearFileUploader();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"Clear\"), React.createElement(Button, {\n        key: 'plan',\n        color: \"primary\",\n        style: {\n          marginBottom: '1rem'\n        },\n        className: \"btn-outline-dark unit-button\",\n        onClick: function onClick() {\n          return _this3.planRequest();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"Plan\")), \"\\xA0\\xA0\", React.createElement(ButtonGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(Button, {\n        key: 'save_trip',\n        color: \"primary\",\n        style: {\n          marginBottom: '1rem'\n        },\n        className: \"btn-outline-dark unit-button\",\n        onClick: function onClick() {\n          return _this3.saveToFile('json');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Export Trip\"), React.createElement(Button, {\n        key: 'save_map',\n        color: \"primary\",\n        style: {\n          marginBottom: '1rem'\n        },\n        className: \"btn-outline-dark unit-button\",\n        onClick: function onClick() {\n          return _this3.saveToFile(_this3.props.trip.options.map);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"Export Map\")));\n      var addBody = React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(InputGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"text\",\n        name: \"id\",\n        id: \"id_field\",\n        placeholder: \"ID\",\n        onChange: this.handleChangeID,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }), React.createElement(Input, {\n        type: \"text\",\n        name: \"name\",\n        id: \"name_field\",\n        placeholder: \"Name\",\n        onChange: this.handleChangeName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }))), React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(InputGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"number\",\n        name: \"latitude\",\n        id: \"latitude_field\",\n        placeholder: \"Latitude\",\n        step: \"0.00000001\",\n        onChange: this.handleChangeLat,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }), React.createElement(Input, {\n        type: \"number\",\n        name: \"longitude\",\n        id: \"longitude_field\",\n        placeholder: \"Longitude\",\n        step: \"0.00000001\",\n        onChange: this.handleChangeLong,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }))), React.createElement(Button, {\n        key: 'options_submit',\n        className: \"btn-outline-dark unit-button\",\n        onClick: function onClick() {\n          return _this3.addPlace();\n        },\n        block: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(MdAdd, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      })));\n      return React.createElement(IconContext.Provider, {\n        value: {\n          size: '1.8em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(CardBody, {\n        id: \"Plan\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(CardTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, \"Plan a trip around the world!\"), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(Col, {\n        lg: \"5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, functions, fileuploader, React.createElement(CardTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, \"Add stops to your trip!\"), addBody, React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      })), React.createElement(Col, {\n        lg: \"7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(Map, {\n        trip: this.props.trip,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }), React.createElement(Search, {\n        config: this.props.config,\n        updatePlaces: this.props.updatePlaces,\n        planRequest: this.planRequest,\n        addPlace: this.addPlace,\n        places: this.state.places,\n        port: this.port,\n        host: this.host,\n        realTime: this.props.realTime,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }), React.createElement(Itinerary, {\n        config: this.props.config,\n        trip: this.props.trip,\n        updatePlaces: this.props.updatePlaces,\n        planRequest: this.planRequest,\n        updateTrip: this.props.updateTrip,\n        realTime: this.props.realTime,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Plan;\n}(Component);\n\nexport default Plan;","map":{"version":3,"sources":["C:\\Users\\Abby\\Desktop\\portfolio\\portfolio\\client\\src\\Components\\Trip-Planner\\components\\Application\\Plan.js"],"names":["React","Component","CardBody","CardTitle","Col","Container","Row","ButtonGroup","Button","request","Itinerary","Map","Search","Collapse","Form","IconContext","MdAdd","Input","InputGroup","Plan","props","getFile","bind","planRequest","state","isLoad","ID","name","lat","long","handleChangeID","handleChangeLong","handleChangeName","handleChangeLat","event","setState","target","value","reader","FileReader","onload","fileContent","result","contents","JSON","parse","updateBasedOnResponse","readAsText","files","trip","places","length","port","host","then","response","showComponent","place","updatePlaces","realTime","defaultState","type","version","title","options","units","unitName","unitRadius","optimization","map","distances","fileType","source","stringify","filename","replace","contentType","window","navigator","msSaveOrOpenBlob","blob","Blob","decodeURIComponent","encodeURI","a","document","createElement","download","href","encodeURIComponent","body","appendChild","click","removeChild","fileuploader","functions","marginBottom","toggleLoad","clearFileUploader","saveToFile","addBody","addPlace","size","config","updateTrip"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport { CardBody, CardTitle } from 'reactstrap';\r\nimport { Col, Container, Row } from 'reactstrap';\r\nimport { ButtonGroup, Button } from 'reactstrap';\r\nimport { request } from '../../api/api';\r\nimport Itinerary from './Itinerary';\r\nimport Map from './Map';\r\nimport Search from './Search';\r\nimport { Collapse } from 'reactstrap';\r\nimport { Form } from 'reactstrap';\r\nimport { IconContext } from 'react-icons'\r\nimport { MdAdd } from 'react-icons/md'\r\nimport { Input, InputGroup } from 'reactstrap'\r\n\r\nclass Plan extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.getFile = this.getFile.bind(this);\r\n        this.planRequest = this.planRequest.bind(this);\r\n        this.state = {\r\n            isLoad: false,\r\n            ID: \"\",\r\n            name : \"\",\r\n            lat : 0,\r\n            long : 0\r\n        };\r\n        this.handleChangeID = this.handleChangeID.bind(this);\r\n        this.handleChangeLong = this.handleChangeLong.bind(this);\r\n        this.handleChangeName = this.handleChangeName.bind(this);\r\n        this.handleChangeLat = this.handleChangeLat.bind(this);\r\n    }\r\n\r\n    handleChangeID(event) {\r\n        this.setState({ID: event.target.value});\r\n    }\r\n\r\n    handleChangeName(event) {\r\n        this.setState({name: event.target.value});\r\n    }\r\n\r\n    handleChangeLat(event) {\r\n        this.setState({lat: event.target.value});\r\n    }\r\n\r\n    handleChangeLong(event) {\r\n        this.setState({long: event.target.value});\r\n    }\r\n\r\n\r\n    getFile(event){\r\n        let reader = new FileReader();\r\n        reader.onload = function(event) {\r\n            let fileContent = event.target.result;\r\n            let contents = JSON.parse(fileContent);\r\n            this.props.updateBasedOnResponse(contents);\r\n        }.bind(this);\r\n        reader.readAsText(event.target.files[0]);\r\n    }\r\n\r\n    planRequest(){\r\n        if (this.props.trip.places.length !== 0) {\r\n            request(this.props.trip, 'plan', this.props.port, this.props.host).then(response => this.props.updateBasedOnResponse(response));\r\n            this.setState({\r\n                showComponent: true,\r\n            });\r\n        }\r\n    }\r\n    addPlace(){\r\n        if(this.state.ID.length===0 && this.state.name.length===0 && this.state.lat ===0 && this.state.long ===0) return;\r\n        const place = {'id': this.state.ID, 'name': this.state.name, 'latitude': this.state.lat, 'longitude': this.state.long};\r\n        this.props.updatePlaces(place,\"add\");\r\n        if(this.props.realTime) this.planRequest();\r\n    }\r\n\r\n    clearFileUploader(){\r\n        const defaultState = {\r\n            type: \"trip\",\r\n            version: 4,\r\n            title: \"My Trip\",\r\n            options: {\r\n                units: \"miles\",\r\n                unitName: \"\",\r\n                unitRadius: 0,\r\n                optimization: \"none\",\r\n                map: \"kml\"\r\n            },\r\n            places: [],\r\n            distances: [],\r\n            map: null\r\n        };\r\n        this.props.updateBasedOnResponse(defaultState);\r\n    }\r\n\r\n    saveToFile(fileType){\r\n        let source = (fileType ==='json') ? JSON.stringify(this.props.trip) : this.props.trip.map;\r\n        let filename = this.props.trip.title.replace(' ', '_') + '.' + fileType;\r\n        let contentType = \"application/\" + fileType + \";charset=utf-8;\";\r\n\r\n        if (window.navigator && window.navigator.msSaveOrOpenBlob) {\r\n            let blob = new Blob([decodeURIComponent(encodeURI(source))], { type: contentType });\r\n            navigator.msSaveOrOpenBlob(blob, filename);\r\n        } else {\r\n            let a = document.createElement('a');\r\n            a.download = filename;\r\n            a.href = 'data:' + contentType + ',' + encodeURIComponent(source);\r\n            a.target = '_blank';\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            document.body.removeChild(a);\r\n        }\r\n    }\r\n\r\n    toggleLoad() {\r\n        this.setState({ isLoad: !this.state.isLoad });\r\n    }\r\n\r\n    render() {\r\n        const fileuploader =\r\n            <Collapse isOpen={this.state.isLoad}>\r\n                <p>Upload your trip file:</p>\r\n                <form>\r\n                    <input type=\"file\" name=\"myFile\" id=\"example\" onChange={(event) => {this.getFile(event)}}/>\r\n                </form>\r\n            </Collapse>;\r\n\r\n        const functions =\r\n            <React.Fragment>\r\n                <ButtonGroup>\r\n                    <Button\r\n                        key={'load'}\r\n                        color= \"primary\" style={{ marginBottom: '1rem' }}\r\n                        className='btn-outline-dark unit-button'\r\n                        onClick={()=> this.toggleLoad()}\r\n                        active={this.state.isLoad}\r\n                    >\r\n                        Load\r\n                    </Button>\r\n                    <Button\r\n                        key={'clear'}\r\n                        color= \"primary\" style={{ marginBottom: '1rem' }}\r\n                        className='btn-outline-dark unit-button'\r\n                        onClick={()=> this.clearFileUploader()}\r\n                    >\r\n                        Clear\r\n                    </Button>\r\n                    <Button\r\n                        key={'plan'}\r\n                        color= \"primary\" style={{ marginBottom: '1rem' }}\r\n                        className='btn-outline-dark unit-button'\r\n                        onClick={() => this.planRequest()}\r\n                    >\r\n                        Plan\r\n                    </Button>\r\n                </ButtonGroup>\r\n                &nbsp;&nbsp;\r\n                <ButtonGroup>\r\n                    <Button\r\n                        key={'save_trip'}\r\n                        color= \"primary\" style={{ marginBottom: '1rem' }}\r\n                        className='btn-outline-dark unit-button'\r\n                        onClick={() => this.saveToFile('json')}\r\n                    >\r\n                        Export Trip\r\n                    </Button>\r\n                    <Button\r\n                        key={'save_map'}\r\n                        color= \"primary\" style={{ marginBottom: '1rem' }}\r\n                        className='btn-outline-dark unit-button'\r\n                        onClick={() => this.saveToFile(this.props.trip.options.map)}\r\n                    >\r\n                        Export Map\r\n                    </Button>\r\n                </ButtonGroup>\r\n            </React.Fragment>;\r\n\r\n        const addBody =\r\n\r\n            <React.Fragment>\r\n                <Form>\r\n                    <InputGroup>\r\n                        <Input\r\n                            type=\"text\"\r\n                            name=\"id\"\r\n                            id=\"id_field\"\r\n                            placeholder=\"ID\"\r\n                            onChange= {this.handleChangeID}\r\n                        />\r\n                        <Input\r\n                            type=\"text\"\r\n                            name=\"name\"\r\n                            id=\"name_field\"\r\n                            placeholder=\"Name\"\r\n                            onChange= {this.handleChangeName}\r\n                        />\r\n                    </InputGroup>\r\n                </Form>\r\n                <Form>\r\n                    <InputGroup>\r\n                        <Input\r\n                            type=\"number\"\r\n                            name=\"latitude\"\r\n                            id=\"latitude_field\"\r\n                            placeholder=\"Latitude\"\r\n                            step=\"0.00000001\"\r\n                            onChange= {this.handleChangeLat}\r\n                        />\r\n                        <Input\r\n                            type=\"number\"\r\n                            name=\"longitude\"\r\n                            id=\"longitude_field\"\r\n                            placeholder=\"Longitude\"\r\n                            step=\"0.00000001\"\r\n                            onChange= {this.handleChangeLong}\r\n                        />\r\n                    </InputGroup>\r\n                </Form>\r\n                <Button\r\n                    key={'options_submit'}\r\n                    className='btn-outline-dark unit-button'\r\n                    onClick={()=> this.addPlace()}\r\n                    block\r\n                >\r\n                    <MdAdd/>\r\n                </Button>\r\n            </React.Fragment>;\r\n\r\n\r\n        return (\r\n            <IconContext.Provider value={{ size: '1.8em' }}>\r\n                <Container>\r\n                    <CardBody id=\"Plan\">\r\n                        <CardTitle>Plan a trip around the world!</CardTitle>\r\n                        <hr/>\r\n                        <Row>\r\n                            <Col lg=\"5\">\r\n                                {functions}\r\n                                {fileuploader}\r\n                                <CardTitle>Add stops to your trip!</CardTitle>\r\n                                {addBody}\r\n                                <hr/>\r\n                            </Col>\r\n                            <Col lg=\"7\">\r\n                                <Map\r\n                                    trip={this.props.trip}\r\n                                />\r\n                            </Col>\r\n                          </Row>\r\n                          <hr/>\r\n                          <Search\r\n                              config={this.props.config}\r\n                              updatePlaces={this.props.updatePlaces}\r\n                              planRequest={this.planRequest}\r\n                              addPlace={this.addPlace}\r\n                              places={this.state.places}\r\n                              port={this.port}\r\n                              host={this.host}\r\n                              realTime = {this.props.realTime}\r\n                          />\r\n                            <br/>\r\n\r\n                          <Itinerary\r\n                              config={this.props.config}\r\n                              trip={this.props.trip}\r\n                              updatePlaces={this.props.updatePlaces}\r\n                              planRequest={this.planRequest}\r\n                              updateTrip={this.props.updateTrip}\r\n                              realTime = {this.props.realTime}\r\n                          />\r\n                  </CardBody>\r\n              </Container>\r\n            </IconContext.Provider>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Plan;\r\n"]},"metadata":{},"sourceType":"module"}